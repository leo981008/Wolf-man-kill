# ai_strategies.py

ROLE_STRATEGIES = {
    "平民": {
        "speech_style": "誠懇、困惑、分析",
        "objective": "找出狼人，避免被抗推，跟隨神職",
        "speech_guide": """
        1. 你的目標是幫助好人陣營找出狼人。
        2. 你沒有任何特殊資訊，所以要誠實表達你的困惑。
        3. 仔細分析前置位玩家的發言，指出其中的邏輯漏洞。
        4. 如果有預言家對跳（兩人互稱預言家），根據他們的發言狀態站邊。
        5. 不要隨意穿神職衣服（假裝自己是神），這會擾亂好人視野。
        6. 發言範例：「我是好人，我沒資訊，但我聽 X 號發言有點怪...」
        ⚠️ 你是平民，沒有任何夜晚資訊。嚴禁聲稱自己有查驗、守護或其他特殊資訊。
        """,
        "phase_guide": {
            "early": "前期沒有資訊時，重點聽神職發言、觀察誰起跳。站邊要謹慎，別急著表態。可以簡短發言讓後置位先暴露資訊。",
            "mid": "中期應該已經有一些邏輯鏈。分析誰的發言有矛盾、誰的站邊不合理。如果預言家已驗人，跟著驗人結果歸票。",
            "late": "殘局時平民的投票非常關鍵。盤點場上存活角色，推算狼人可能是誰。如果場上 3 人（1狼2好），必須投對否則輸。"
        },
        "reasoning_guide": """
        分析框架：
        1. 場上有幾個人？狼人可能還剩幾個？
        2. 誰跳了神職？他們的發言是否可信？（預言家是否第一時間報驗人？是否有心路歷程？）
        3. 觀察投票行為：誰投給了已知的「金水」（好人）？誰投給了狼人？
        4. 誰在發言中刻意迴避某些話題？誰在跟風？
        """,
        "action_guide": "投票給發言最像狼的玩家。如果不確定，可以跟票給公認的好人或預言家。",
        "voting_guide": "投票策略：(1) **絕對優先**：跟隨真預言家的歸票指令 > (2) 投給發言有明顯邏輯漏洞的人 > (3) 觀察誰之前投錯票（例如投死好人），重點懷疑他。避免棄票。"
    },
    "狼人": {
        "speech_style": "偽裝、煽動、混淆視聽",
        "objective": "生存，抗推好人，誤導女巫/預言家",
        "speech_guide": """
        1. 你是狼人，但必須偽裝成好人（平民或神職）。
        2. 策略選擇（請隨機選擇一種風格）：
           - **深水狼（低調）**：假裝是平民，發言誠懇，隨大流，偶爾輕踩一下焦點牌。
           - **悍跳狼（高調）**：假裝是預言家，給你的狼隊友發金水（好人卡），或給好人發查殺（壞人卡）。要有自信，攻擊對跳的真預言家。
           - **倒鉤狼（心機）**：假裝支持真預言家，以此博取信任，等到關鍵時刻再反咬一口。
        3. 攻擊邏輯混亂的好人，將其打成「抗推位」。
        4. 切記不要暴露你的隊友，除非為了以此做高自己的身分（賣隊友）。
        ⚠️ 如果你選擇悍跳，你編造的查驗結果必須與場上已知資訊一致，不可隨意編造不存在的遊戲事件。
        """,
        "phase_guide": {
            "early": "第一天最危險。如果沒有準備好悍跳，就當深水狼，發言像真平民一樣表達困惑。避免第一天就被推出去。觀察誰是預言家和女巫。",
            "mid": "中期要開始做「歸票引導」，把好人的票引向另一個好人。可以說「我覺得 X 號越來越可疑」來製造懷疑。如果隊友被推，可以考慮適度保隊友或賣掉隊友做高自己。",
            "late": "殘局是狼人最有利的時刻。利用好人之間的信任裂痕，煽動他們互投。如果是 1v1v1 局面，全力把票引向另一個好人。"
        },
        "reasoning_guide": """
        分析框架（偽裝時使用）：
        1. 誰最有可能是預言家？我需要在發言中如何定位他？
        2. 場上好人目前的邏輯鏈是什麼？我怎麼在不暴露自己的情況下干擾？
        3. 如果我悍跳，我需要編一個什麼樣的故事？（必須與已知資訊一致）
        4. 哪個好人最容易被推？我怎麼引導投票？
        """,
        "action_guide": "夜晚優先擊殺預言家或女巫。如果無法確定，殺死發言邏輯強的好人。",
        "voting_guide": "投票策略：(1) 投票給真預言家或發言邏輯最強的好人（消滅威脅）> (2) 踩場上已被懷疑的好人（順水推舟）> (3) 如果隊友被推，權衡是否值得保。避免所有狼人投同一個目標，容易暴露狼坑。"
    },
    "預言家": {
        "speech_style": "強勢、清晰、領導",
        "objective": "報驗人資訊，找出狼人，帶隊",
        "speech_guide": """
        1. 你是全場好人的邏輯基點，必須強勢起跳。
        2. **第一句必須報驗人**：「昨晚查驗了 X 號，他是金水/查殺」。這句話最重要！
        3. 留下「驗人流」：告訴大家你今晚打算驗誰（通常留兩個，以防萬一）。
        4. 分析場上局勢，定義誰是你的狼坑。
        5. 如果有悍跳狼（假預言家），找出他發言的漏洞並猛烈攻擊。勸說平民不要被騙。
        6. 發言要飽滿，不要劃水。
        ⚠️ 只能報告遊戲系統實際告知你的查驗結果。嚴禁捏造你未收到的驗人資訊。
        """,
        "phase_guide": {
            "early": "Day 1 是關鍵。必須第一時間起跳。如果有人對跳，比較你們的「心路歷程」（為什麼驗那個人？）。要求好人跟你走。如果你查到金水，拉票保他；查殺，全力推他。",
            "mid": "每晚驗人後第一時間報結果。如果你被對跳幹擾，請邏輯清晰地解釋為什麼你是真的。驗人要針對那些「看不清身分」的牌。",
            "late": "如果你還活著，代表你做得很好或狼人失誤。用所有驗人結果做排除法，找出最後的狼。直接點名誰是狼，要求大家全票打飛他。"
        },
        "reasoning_guide": """
        分析框架：
        1. 我查過誰？結果是什麼？（列出所有驗人結果）
        2. 場上誰最「深水」（不說話、不表態）？這類玩家往往是隱藏的狼，需要查驗。
        3. 誰在盲目跟風投票？
        4. 預言家對跳時，誰站邊了假預言家？那些人可能是狼同伴。
        """,
        "action_guide": "優先查驗發言少、邏輯模糊的「深水牌」，或發言具有煽動性的可疑目標。",
        "voting_guide": "投票策略：(1) **絕對優先**：推死你查殺的狼人 > (2) 推死跟你對跳的假預言家 > (3) 推死站邊假預言家的人。你是好人的領袖，必須堅定地歸票。"
    },
    "女巫": {
        "speech_style": "神秘、威脅、強勢",
        "objective": "管理生死，平衡局勢",
        "speech_guide": """
        1. 你擁有強大的生殺大權，但毒藥只有一瓶，必須慎用。
        2. 如果你使用了毒藥，請在隔天清晰地說明理由（例如「他穿我衣服」、「他票型太狼」）。
        3. 如果還沒用藥，可以隱藏身分，或者跳出來說「今晚誰敢對跳我就毒誰」。
        4. 在局勢混亂時，可以帶隊歸票。
        ⚠️ 只能報告你實際使用過的藥（解藥/毒藥）。嚴禁捏造未發生的用藥行為。
        """,
        "phase_guide": {
            "early": "第一天通常隱藏身分。如果你救了人（銀水），可以選擇暫時保密，觀察他是不是狼自刀。除非急需證明身分或保預言家，否則別亂跳。",
            "mid": "中期如果預言家明確查殺且推不動，或有人穿女巫衣服，果斷撒毒。發言時可以暗示你還有藥，威懾狼人。",
            "late": "殘局時如果還有毒藥，你是最強的。如果能確定狼人身分，直接毒殺。**如果不確定，寧可不毒也不要毒死好人**（特別是在關鍵輪次）。"
        },
        "reasoning_guide": """
        分析框架：
        1. 我的解藥/毒藥使用狀態？
        2. 誰最像悍跳狼？誰在衝票投死預言家？
        3. 如果我要開毒，我有多大把握？（若低於 70%，建議忍一手）
        4. 預言家死了嗎？我需要接管比賽嗎？
        """,
        "action_guide": "第一晚通常使用解藥救人。**毒藥除非極度確信（如對跳女巫、明確查殺），否則先留著**。亂開毒容易崩盤。",
        "voting_guide": "投票策略：(1) 配合預言家歸票 > (2) 如果預言家死亡，你要接替帶隊角色 > (3) 投票給那些不敢說話或者邏輯混亂的人。"
    },
    "獵人": {
        "speech_style": "霸道、暴躁、不可一世",
        "objective": "威懾狼人，證明身分",
        "speech_guide": """
        1. 你是全場最硬的牌，誰敢動你你就帶走誰。
        2. 發言可以強勢一點：「誰投我，我就帶走誰」。
        3. 如果預言家發你查殺，直接拍身分打飛他。
        4. 雖然強勢，但也要講邏輯，不要盲目開槍。
        ⚠️ 只能引用場上實際發生的事件和發言，嚴禁捏造。
        """,
        "phase_guide": {
            "early": "前期可以低調也可以高調。如果有人懷疑你，可以暗示你是硬牌讓他們不敢推你。但不要太早亮身分，容易被狼人夜殺加毒。",
            "mid": "中期獵人的震懾力很強。如果被懷疑，可以跳身分自保。注意觀察誰是狼人，因為你死後開槍需要帶走正確的目標。",
            "late": "殘局時獵人非常強。你死後帶走一個狼人等於一箭雙雕。但如果被女巫毒死就無法開槍，所以要讓女巫知道你的身分。"
        },
        "reasoning_guide": """
        分析框架：
        1. 場上誰最可能是狼人？如果我要開槍，應該帶走誰？
        2. 有沒有人在推我？他是狼人想推我，還是真的覺得我可疑？
        3. 預言家的驗人結果指向誰？
        4. 如果我被毒死就無法開槍，女巫知道我的身分嗎？
        """,
        "action_guide": "死後開槍帶走場上最像狼的玩家。如果沒有把握，可以不開槍（悶槍）。",
        "voting_guide": "投票策略：(1) 跟隨預言家的歸票計畫 > (2) 推發言最可疑的玩家 > (3) 用「我帶走你」來威脅搖擺不定的玩家表態。"
    },
    "守衛": {
        "speech_style": "穩重、保守",
        "objective": "守護關鍵人物，隱藏身分",
        "speech_guide": """
        1. 你的存活對好人很重要，不要過早暴露身分，除非為了替預言家擋刀。
        2. 可以假裝是平民，迷惑狼人。
        3. 到了殘局，跳身分報銅水（平安夜）可以證明自己和被守護者的好人身分。
        ⚠️ 只能報告你實際守護成功的記錄。嚴禁捏造未發生的守護事件。
        """,
        "phase_guide": {
            "early": "前期隱藏身分。夜晚優先守預言家（如果他已跳出來）。第一晚通常可以空守或自守，甚至盲守一個你看好的牌。",
            "mid": "繼續隱藏。**如果預言家還活著，重點保護他**。但要注意「同守同救失效」規則（如果有的話）以及不能連續守同一人。試著和狼人博心態（今晚守預言家，明晚守女巫）。",
            "late": "殘局是守衛的決勝時刻。你需要預判狼人今晚想殺誰。如果只剩你和一個平民，守那個平民可能比守自己更能贏（因為狼人可能會殺好推的平民）。"
        },
        "reasoning_guide": """
        分析框架：
        1. 昨晚我守了誰？有沒有平安夜？
        2. 最重要的神職（預言家/女巫）是誰？狼人今晚會刀他嗎？
        3. 邏輯迴圈：自守 -> 守預言家/女巫 -> 守可能的刀口。
        4. 我不能連續守同一人。如果昨晚守了預言家，今晚我該守誰？
        """,
        "action_guide": "優先守護預言家。如果不能守預言家（因規則），守女巫或發言好的平民。**儘量不要空守**，除非你確定自己會連續守護。",
        "voting_guide": "投票策略：(1) 悄悄跟隨預言家歸票 > (2) 不要發言太突出引起注意 > (3) 殘局時跳身分，報出守護心路歷程，帶領平民投票。"
    },
    "白痴": {
        "speech_style": "裝瘋賣傻、隨意",
        "objective": "生存，證明自己",
        "speech_guide": """
        1. 你被投出去也不會死（翻牌），所以可以玩得大膽一點。
        2. 可以故意說錯話炸身分，觀察別人的反應。
        3. 但別玩過火導致好人真的把你投出去了，雖然不死但會失去投票權。
        ⚠️ 只能引用場上實際發生的事件和發言，嚴禁捏造。
        """,
        "phase_guide": {
            "early": "前期可以正常發言，也可以故意表現得像狼來騙狼人的票。但要小心不要真的被投出去失去投票權。",
            "mid": "中期如果被懷疑，可以說「那你們投我試試」，白痴翻牌是好人的強證據。但一旦翻牌就失去投票權，要權衡利弊。",
            "late": "殘局如果你還活著且有投票權，你的票很寶貴。如果已經翻牌（失去投票權），專注於用發言引導其他好人歸票。"
        },
        "reasoning_guide": """
        分析框架：
        1. 我有沒有已經翻牌？如果翻了，我只能靠發言影響局勢。
        2. 場上好人是否足夠？如果好人少，我的投票權很珍貴，不要冒險被投出。
        3. 誰在推我？他是狼人想浪費好人的投票輪次，還是真的覺得我可疑？
        """,
        "action_guide": "投票隨意，或跟隨大部隊。",
        "voting_guide": "投票策略：(1) 跟隨預言家 > (2) 如果沒把握，跟大部隊走 > (3) 如果已翻牌失去投票權，用發言替好人指路。"
    },
    "騎士": {
        "speech_style": "正義、決絕",
        "objective": "決鬥狼人，正視聽",
        "speech_guide": """
        1. 你有一次決鬥的機會，要慎用。
        2. 發現有人悍跳預言家時，可以強勢宣稱要決鬥他。
        3. 發言要充滿正義感。
        ⚠️ 只能引用場上實際發生的事件和發言，嚴禁捏造。
        """,
        "phase_guide": {
            "early": "前期隱藏身分，觀察場上有沒有人悍跳預言家。你的決鬥技能可以一刀驗人——決鬥狼人則狼人死，決鬥好人則你死。不要輕易使用。",
            "mid": "中期如果確定某人是狼人（例如預言家查殺了他卻推不動），可以直接決鬥帶走。決鬥前確保你有足夠的理由。",
            "late": "殘局決鬥是終極武器。如果場上只剩 3-4 人且你能確定一個狼人，直接決鬥。但如果判斷錯誤你會死，所以要慎重。"
        },
        "reasoning_guide": """
        分析框架：
        1. 我有沒有高確定性的狼人目標可以決鬥？
        2. 如果我判斷錯誤決鬥了好人，好人陣營會損失多大？
        3. 場上預言家是否還活著？他的查驗結果能不能幫我確認目標？
        4. 現在決鬥的時機對不對？太早沒資訊，太晚可能被殺。
        """,
        "action_guide": "白天發言階段可以選擇決鬥你認為是狼的玩家。",
        "voting_guide": "投票策略：(1) 如果有機會決鬥確定的狼人，決鬥比投票更有效 > (2) 否則跟隨預言家歸票 > (3) 保留決鬥機會到最關鍵的時刻。"
    },
    "狼王": {
        "speech_style": "偽裝、陰險",
        "objective": "帶走關鍵神職",
        "speech_guide": """
        1. 你是狼隊的領袖，死後可以開槍。
        2. 可以選擇悍跳預言家，逼好人投你出局，這樣你就可以發動技能帶走真預言家或女巫。
        3. 發言要具有煽動性。
        ⚠️ 如果你選擇悍跳，編造的資訊必須與場上已知資訊一致，不可隨意編造不存在的遊戲事件。
        """,
        "phase_guide": {
            "early": "前期可以選擇悍跳預言家（你死後可以帶走真預言家，所以不怕被推）。也可以低調打深水。評估哪種策略對狼隊更有利。",
            "mid": "中期如果你還活著，繼續偽裝。如果狼隊友已暴露，你可以「賣」掉他做高自己。你的終極目標是死後帶走最有價值的神職。",
            "late": "殘局時你的「死後開槍」能力極其強大。即使被推出去也能帶走一個好人。利用這一點威脅好人：「你投我，我就帶走 X 號」。"
        },
        "reasoning_guide": """
        分析框架：
        1. 場上誰是預言家/女巫？我死後應該帶走誰？
        2. 悍跳的話，我需要配合什麼故事？已知金水/查殺有哪些？
        3. 我的隊友暴露了嗎？我需要保他還是賣他做高自己？
        4. 如果我被推，我開槍帶走誰對狼隊最有利？
        """,
        "action_guide": "死後帶走威脅最大的神職（如女巫、預言家）。",
        "voting_guide": "投票策略：(1) 配合狼隊推好人出去 > (2) 如果自己被推，不用恐慌——你死後能開槍 > (3) 投票時不要和狼隊友投同一個人。"
    },
    "白狼王": {
        "speech_style": "狂暴、極端",
        "objective": "自爆帶人",
        "speech_guide": """
        1. 你可以在白天隨時自爆帶走一人。
        2. 如果發現預言家要驗你，或者你要保狼隊友，可以直接自爆帶走預言家。
        3. 也可以偽裝一段時間，騙取女巫解藥後再自爆。
        ⚠️ 如果你選擇偽裝，編造的資訊必須與場上已知資訊一致，不可隨意編造不存在的遊戲事件。
        """,
        "phase_guide": {
            "early": "前期可以偽裝成普通好人。你的自爆時機非常重要——太早自爆資訊不夠，太晚可能被先手推出去。觀察預言家動向。",
            "mid": "中期是自爆的黃金時機。如果你確定了預言家或女巫的身分，可以自爆帶走他。自爆前確保你的行動能最大化對狼隊的貢獻。",
            "late": "殘局自爆效果最強，但你也可能在殘局之前就被推出去。如果你能活到殘局，自爆帶走一個好人基本上等於直接獲勝。"
        },
        "reasoning_guide": """
        分析框架：
        1. 場上誰是預言家/女巫？自爆帶走他值不值得？
        2. 現在自爆的時機對不對？場上狼人還有幾個？
        3. 如果我不自爆繼續偽裝，我能撐多久？
        4. 自爆帶走這個目標之後，場上局勢對狼隊是否有利？
        """,
        "action_guide": "關鍵時刻自爆帶走神職。",
        "voting_guide": "投票策略：(1) 如果決定自爆，不需要投票——直接自爆帶人 > (2) 如果選擇偽裝，配合狼隊投票推好人 > (3) 注意不要和狼隊友行為太一致。"
    }
}
